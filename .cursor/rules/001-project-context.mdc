---
description: "Essential project context for Usage UI - a shadcn/ui component registry monorepo for usage meters and quota visualization"
alwaysApply: true
---

# Usage UI - Project Context

> A shadcn/ui component registry for building usage meters, quota indicators, and resource consumption visualizations. **Structured as a monorepo.**

## Monorepo Structure

```
usage-ui/
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ www/                    # Documentation + demo site (@usage-ui/www)
â”‚       â”œâ”€â”€ src/app/            # Next.js pages
â”‚       â”œâ”€â”€ src/components/     # Site-specific components
â”‚       â””â”€â”€ public/r/           # Generated registry JSON (DO NOT EDIT)
â”‚
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ ui/                     # Component registry (@usage-ui/ui)
â”‚       â”œâ”€â”€ src/components/
â”‚       â”‚   â”œâ”€â”€ ui/             # Base shadcn components (DO NOT MODIFY)
â”‚       â”‚   â””â”€â”€ registry/       # YOUR meter components
â”‚       â”œâ”€â”€ src/lib/            # Utilities (cn, etc.)
â”‚       â”œâ”€â”€ src/styles/         # CSS variables
â”‚       â”œâ”€â”€ registry.json       # Component manifest (CRITICAL)
â”‚       â””â”€â”€ components.json     # shadcn CLI config
â”‚
â”œâ”€â”€ tooling/typescript/         # Shared TypeScript configs
â”œâ”€â”€ turbo.json                  # Build orchestration
â”œâ”€â”€ pnpm-workspace.yaml         # Workspace definition
â””â”€â”€ lefthook.yml                # Git hooks
```

## Tech Stack

- **Monorepo**: pnpm workspaces + Turborepo + Changesets
- **Framework**: Next.js 16+ (App Router, React Server Components)
- **Language**: TypeScript (strict mode)
- **UI**: shadcn/ui (new-york style), Radix UI primitives
- **Styling**: Tailwind CSS v4, CSS variables (OKLCH color space)
- **Data Viz**: Tremor + Recharts
- **Package Manager**: pnpm (NOT npm or yarn)
- **Linting**: Biome (NOT ESLint/Prettier)
- **Icons**: Lucide React

## Critical Files (Modify with Care)

| File | Location | Risk | Notes |
|------|----------|------|-------|
| `registry.json` | `packages/ui/` | ğŸ”´ CRITICAL | Breaking changes break ALL installations |
| `components.json` | `packages/ui/` | ğŸ”´ CRITICAL | shadcn CLI config - invalid = CLI fails |
| `turbo.json` | Root | ğŸ”´ CRITICAL | Build pipeline |
| `globals.css` | `packages/ui/src/styles/` | ğŸŸ¡ HIGH | CSS variables affect all components |
| `ui/*` | `packages/ui/src/components/` | ğŸŸ¡ HIGH | Base shadcn - prefer not editing |

## Import Aliases

Always use path aliases, never relative imports:

```tsx
// âœ… Correct
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";

// âŒ Wrong - breaks when copied to user projects
import { cn } from "../../lib/utils";
```

## Key Commands

```bash
# All packages
pnpm dev                            # Start dev servers
pnpm build                          # Build all (cached)
pnpm lint                           # Lint all
pnpm typecheck                      # Type check all

# Package-specific
pnpm dev --filter=@usage-ui/www     # Dev docs only
pnpm build --filter=@usage-ui/ui    # Build UI only

# Add dependencies
pnpm add <pkg> --filter=@usage-ui/ui
```

## Registry Distribution

Components are distributed via shadcn CLI, NOT npm:

```bash
# Users install like this:
npx shadcn add https://usage-ui.vercel.app/r/usage-meter.json
```

Components are **copied** into user projects at `components/ui/` - they own the code.

## Where to Add Components

| Type | Location |
|------|----------|
| Your meter components | `packages/ui/src/components/registry/` |
| Base shadcn (don't modify) | `packages/ui/src/components/ui/` |
| Site-specific (docs) | `apps/www/src/components/` |

## Do NOT

- âŒ Use `npm` commands (use `pnpm`)
- âŒ Modify existing component APIs without updating registry.json
- âŒ Use hardcoded colors (use CSS variables)
- âŒ Create components without TypeScript types
- âŒ Use default exports for components
- âŒ Skip the `"use client"` directive for client components
- âŒ Use relative imports
- âŒ Edit `apps/www/public/r/` (generated files)
- âŒ Modify `packages/ui/src/components/ui/` (base shadcn)
